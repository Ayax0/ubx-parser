!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["ubx-parser"]=r():e["ubx-parser"]=r()}(this,(()=>(()=>{"use strict";var e={89:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PacketParser=void 0;var t=function(){function e(e,r){this.packet_class=e,this.packet_id=r}return e.prototype.compareSignature=function(e,r){return this.packet_class==e&&this.packet_id==r},e}();r.PacketParser=t},609:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UBXParser=void 0;var n=t(425),a=function(){function e(){this.parsers=[],this.packetListeners=new Map,this.localBuffer=Buffer.from(""),this.registerParser(new n.UBX_NAV_PVT_Parser)}return e.prototype.parse=function(e){var r,t,n,a=this;this.localBuffer=Buffer.concat([this.localBuffer,e]);var o=this.localBuffer.indexOf(Buffer.from([181,98])),i=this.localBuffer.indexOf(Buffer.from([181,98]),2);if(0!=o&&i>0)return this.localBuffer=this.localBuffer.subarray(i),null===(r=this.packetListeners.get("warning"))||void 0===r?void 0:r.forEach((function(e){return e(new Error("invalide packet droped"))}));if(0==o&&-1!=i){var d=this.localBuffer.subarray(0,i);if(this.localBuffer=this.localBuffer.subarray(i),d.length<8)return null===(t=this.packetListeners.get("error"))||void 0===t?void 0:t.forEach((function(e){return e(new Error("invalide packet size"))}));var s=d.readUInt8(2),c=d.readUInt8(3),u=d.readUInt16LE(4),f=d.subarray(6,6+u);if(f.length!=u)return null===(n=this.packetListeners.get("error"))||void 0===n?void 0:n.forEach((function(e){return e(new Error("invalide packet payload"))}));this.parsers.forEach((function(e){var r;e.compareSignature(s,c)&&(null===(r=a.packetListeners.get("data"))||void 0===r||r.forEach((function(r){var t;try{r(e.parse(f))}catch(e){null===(t=a.packetListeners.get("error"))||void 0===t||t.forEach((function(r){return r(e)}))}})))}))}},e.prototype.registerParser=function(e){this.parsers.push(e)},e.prototype.unregisterParser=function(e){this.parsers=this.parsers.filter((function(r){return r!=e}))},e.prototype.on=function(e,r){var t;this.packetListeners.has(e)?null===(t=this.packetListeners.get(e))||void 0===t||t.push(r):this.packetListeners.set(e,[r])},e}();r.UBXParser=a},287:(e,r)=>{function t(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),(e&255>>8-t<<r)>>r}function n(e,r,n){if(void 0===r&&(r=0),void 0===n&&(n=1),r<=7&&r+n>8){var a=t(255&e,r,r+n>8?8-r:n);return t(e>>8&255,0,r+n-8)<<8-r|a}return r<=7?t(e,r,n):t(e>>8&255,r-8,n)}Object.defineProperty(r,"__esModule",{value:!0}),r.readBitFromUInt32=r.readBitFromUInt16=r.readBitFromUInt8=void 0,r.readBitFromUInt8=t,r.readBitFromUInt16=n,r.readBitFromUInt32=function(e,r,t){if(void 0===r&&(r=0),void 0===t&&(t=1),r<=15&&r+t>16){var a=n(65535&e,r,r+t>16?16-r:t);return n(e>>16&65535,0,r+t-16)<<16-r|a}return r<=15?n(e,r,t):n(e>>16&65535,r-16,t)}},425:function(e,r,t){var n,a=this&&this.__extends||(n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])},n(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)});Object.defineProperty(r,"__esModule",{value:!0}),r.UBX_NAV_PVT_Parser=void 0;var o=t(287),i=function(e){function r(){return e.call(this,1,7)||this}return a(r,e),r.prototype.parse=function(e){return{iTOW:e.readUInt32LE(0),year:e.readUInt16LE(4),month:e.readUInt8(6),day:e.readUInt8(7),hour:e.readUInt8(8),min:e.readUInt8(9),sec:e.readUInt8(10),validDate:1==(0,o.readBitFromUInt8)(e.readUInt8(11),0),validTime:1==(0,o.readBitFromUInt8)(e.readUInt8(11),1),fullyResolved:1==(0,o.readBitFromUInt8)(e.readUInt8(11),2),validMag:1==(0,o.readBitFromUInt8)(e.readUInt8(11),3),tAcc:e.readUInt32LE(12),nano:e.readInt32LE(16),fixType:e.readUInt8(20),gnssFixOK:1==(0,o.readBitFromUInt8)(e.readUInt8(21),0),diffSoln:1==(0,o.readBitFromUInt8)(e.readUInt8(21),1),psmState:(0,o.readBitFromUInt8)(e.readUInt8(21),2,3),headVehValid:1==(0,o.readBitFromUInt8)(e.readUInt8(21),5),carrSoln:(0,o.readBitFromUInt8)(e.readUInt8(21),6,2),confirmedAvai:1==(0,o.readBitFromUInt8)(e.readUInt8(22),5),confirmedDate:1==(0,o.readBitFromUInt8)(e.readUInt8(22),6),confirmedTime:1==(0,o.readBitFromUInt8)(e.readUInt8(22),7),numSV:e.readUInt8(23),lon:1e-7*e.readInt32LE(24),lat:1e-7*e.readInt32LE(28),height:e.readInt32LE(32),hMSL:e.readInt32LE(36),hAcc:e.readUInt32LE(40),vAcc:e.readUInt32LE(44),velN:e.readInt32LE(48),velE:e.readInt32LE(52),velD:e.readInt32LE(56),gSpeed:e.readInt32LE(60),headMot:1e-5*e.readInt32LE(64),sAcc:e.readUInt32LE(68),headAcc:1e-5*e.readUInt32LE(72),pDOP:.01*e.readUInt16LE(76),invalidLlh:1==(0,o.readBitFromUInt16)(e.readUInt16LE(78),0),lastCorrectionAge:(0,o.readBitFromUInt16)(e.readUInt16LE(78),1,4),headVeh:1e-5*e.readInt32LE(84),magDec:.01*e.readInt16LE(88),magAcc:.01*e.readUInt16LE(90)}},r}(t(89).PacketParser);r.UBX_NAV_PVT_Parser=i}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.PacketParser=e.UBXParser=void 0;var r=t(609);Object.defineProperty(e,"UBXParser",{enumerable:!0,get:function(){return r.UBXParser}});var a=t(89);Object.defineProperty(e,"PacketParser",{enumerable:!0,get:function(){return a.PacketParser}})})(),n})()));